<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<!-- Title -->
<title>Dataz Studio - Advanced JSON, XML & Base64 Processing Tool</title>

<!-- Primary Meta Tags -->
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="description" content="A modern, free online tool to view, beautify, and explore JSON data in collapsible tree form and XML data with interactive tree view. Includes Dark/Light mode, full-screen, clipboard features, and data persistence."/>
<meta name="keywords" content="JSON viewer, XML viewer, JSON beautify, XML tree view, online JSON formatter, online XML formatter, JSON editor, XML editor, JSON to XML, XML to JSON, JSON parser, XML parser"/>
<meta name="author" content="Your Name"/>
<meta name="robots" content="index, follow" />
<meta http-equiv="Content-Language" content="en" />

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website" />
<meta property="og:title" content="Dataz Studio - Advanced JSON, XML & Base64 Processor" />
<meta property="og:description" content="Professional data processing tool for JSON tree visualization, XML validation, Base64 encoding/decoding, and JavaScript class generation. Features dark/light themes, full screen mode, and advanced data manipulation." />
<meta property="og:url" content="https://dataz.tools/datacraft-studio" />
<meta property="og:site_name" content="dataz.tools" />
<meta property="og:image" content="https://dataz.tools/assets/preview-image.png" />

<!-- Twitter -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Dataz Studio - Professional Data Processing & Visualization" />
<meta name="twitter:description" content="Transform and visualize JSON/XML data with advanced features: tree views, validation, Base64 encoding, class generation, and more professional tools." />
<meta name="twitter:image" content="https://dataz.tools/assets/preview-image.png" />
<meta name="twitter:site" content="@dataztools" />

<!-- Theme color for mobile browsers -->
<meta name="theme-color" content="#2196f3" />

<link rel="stylesheet" href="styles.css"/>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
<style>
/* Footer stick to bottom */
html, body {
  height: 100%;
  display: flex;
  flex-direction: column;
}
.container {
  flex: 1;
}

/* Side-by-side IO layout */
.io-wrapper {
  display: flex;
  gap: 10px;
  flex: 1;
  min-height: 0;
}

/* Left input column */
.io-input {
  flex: 1;
  display: flex;
  flex-direction: column;
}

/* Right output column */
.io-output {
  flex: 1;
  display: flex;
  flex-direction: column;
}

.io-output .output {
  flex: 1;
}
#json-input {
  flex: 1;
}
#xml-input {
  flex: 1;
}
/* Responsive stack for small screens */
@media (max-width: 768px) {
  .io-wrapper {
    flex-direction: column;
  }
}
</style>
</head>
<body class="dark">

<!-- HEADER -->
<header>
  <div class="header-content">
    <svg xmlns="http://www.w3.org/2000/svg" width="240" height="60" viewBox="0 0 240 60" fill="none">
  <style>
    /* Default = light theme */
    .outline { stroke: #005BBB; }
    .accent { stroke: #00A3A3; }
    .text { fill: #333333; }
    .fill-blue { fill: #005BBB; }
    .fill-teal { fill: #00A3A3; }
    .fill-dark { fill: #4B4B4B; }

    /* Dark theme adjustments */
    body.dark .outline { stroke: #66B2FF; }
    body.dark .accent { stroke: #4DFFFF; }
    body.dark .text { fill: #FFFFFF; }
    body.dark .fill-blue { fill: #66B2FF; }
    body.dark .fill-teal { fill: #4DFFFF; }
    body.dark .fill-dark { fill: #CCCCCC; }

    /* Fallback for system preference dark mode */
    @media (prefers-color-scheme: dark) {
      .outline { stroke: #66B2FF; }
      .accent { stroke: #4DFFFF; }
      .text { fill: #FFFFFF; }
      .fill-blue { fill: #66B2FF; }
      .fill-teal { fill: #4DFFFF; }
      .fill-dark { fill: #CCCCCC; }
    }
  </style>

  <!-- Circular data flow icon -->
  <circle cx="30" cy="30" r="20" class="outline" stroke-width="3" fill="none"/>
  <path d="M30 10 A20 20 0 0 1 50 30" class="accent" stroke-width="3" fill="none"/>
  <path d="M50 30 A20 20 0 0 1 30 50" class="accent" stroke-width="3" fill="none"/>
  
  <!-- Conversion arrows -->
  <polygon points="48,28 54,30 48,32" class="fill-blue"/>
  <polygon points="12,28 6,30 12,32" class="fill-teal"/>
  
  <!-- Graph bars inside -->
  <rect x="24" y="20" width="3" height="10" class="fill-blue"/>
  <rect x="29" y="15" width="3" height="15" class="fill-teal"/>
  <rect x="34" y="25" width="3" height="5" class="fill-dark"/>
  
  <!-- Site Name -->
  <text x="70" y="35" font-family="Inter, sans-serif" font-size="18" class="text">
    Data PlayGround
  </text>
</svg>

    <button id="themeToggle" class="theme-btn">ðŸŒ™ Dark Mode</button>
  </div>
</header>

<!-- Toolbar -->
<div class="toolbar">
  <button id="btn-json" class="active" onclick="showOnly('json')">JSON Viewer</button>
  <button id="btn-xml" onclick="showOnly('xml')">XML Viewer</button>
</div>

<!-- Main Content -->
<div class="container">

  <!-- JSON PANEL -->
  <div id="panel-json" class="panel">
    <div class="io-wrapper">

      <!-- Left side: JSON input -->
      <div class="io-input" id="json-io-input">
        <div class="btn-group">
          <button onclick="copyInput('json-input')">
            <i class="fa-solid fa-copy" style="font-size:20px;color:lightblue;text-shadow:2px 2px 4px #000000;"></i>
            Copy JSON
          </button>
          <button onclick="pasteInput('json-input')">
            <i class="fa-solid fa-paste" style="font-size:20px;color:lightblue;text-shadow:2px 2px 4px #000000;"></i>
            Paste JSON
          </button>
          <button onclick="clearInput('json-input')">
            <i class="fa-solid fa-trash" style="font-size:20px;color:lightblue;text-shadow:2px 2px 4px #000000;"></i>
            Clear JSON
          </button>
          <button onclick="convertJSONtoXML()">
            <i class="fa-solid fa-arrow-right-arrow-left" style="font-size:20px;color:orange;text-shadow:2px 2px 4px #000000;"></i>
            Convert JSON â†’ XML
          </button>
          <button onclick="convertJSONtoCSV()">
            <i class="fa-solid fa-file-csv" style="font-size:20px;color:#4caf50;text-shadow:2px 2px 4px #000000;"></i>
            Convert JSON to CSV
          </button>
          <button onclick="generateJavaScriptClasses()">
            <i class="fa-solid fa-code" style="font-size:20px;color:#9c27b0;text-shadow:2px 2px 4px #000000;"></i>
            Generate JS Classes
          </button>
          <button onclick="removeJSONSpaces('json-input')">
            <i class="fa-solid fa-eraser" style="font-size:20px;color:#ff9800;text-shadow:2px 2px 4px #000000;"></i>
            Remove Whitespace (JSON)
          </button>
          <button class="action-btn" onclick="beautifyJSON()">
            <i class="fa-solid fa-folder-tree" style="font-size:20px;color:lightblue;text-shadow:2px 2px 4px #000000;"></i>
            Tree View
          </button>
          <button class="action-btn" onclick="openFullJSONModal()">
            <i class="fa-solid fa-clipboard-check" style="font-size:20px;color:lightblue;text-shadow:2px 2px 4px #000000;"></i>
            Format JSON
          </button>
          <button class="action-btn" onclick="toggleFullScreen('json-output')">
            <i class="fa-solid fa-display" style="font-size:20px;color:lightblue;text-shadow:2px 2px 4px #000000;"></i>
            Full Screen
          </button>
          <button class="action-btn" onclick="collapseAllJSON()">
            <i class="fa-solid fa-down-left-and-up-right-to-center" style="font-size:20px;color:lightblue;text-shadow:2px 2px 4px #000000;"></i>
            Collapse All
          </button>
          <button class="action-btn" onclick="expandAllJSON()">
            <i class="fa-solid fa-up-right-and-down-left-from-center" style="font-size:20px;color:lightblue;text-shadow:2px 2px 4px #000000;"></i>
            Expand All
          </button>
          <button class="action-btn" onclick="captureScreenshot('json-output', 'json-output-screenshot.png')">
            <i class="fa-solid fa-camera" style="font-size:20px;color:orange;text-shadow:2px 2px 4px #000000;"></i>
            Screenshot
          </button>
        </div>
        <textarea id="json-input" placeholder="Paste JSON here"></textarea>
      </div>

  <!-- Draggable divider -->
  <div class="divider" id="json-divider"></div>

  <!-- Right side: JSON output -->
  <div class="io-output" id="json-io-output">
        <div id="json-output" class="output tree"></div>
      </div>

    </div>
  </div>

  <!-- XML PANEL -->
  <div id="panel-xml" class="panel hidden">
    <div class="io-wrapper">

      <!-- Left side: XML input -->
      <div class="io-input" id="xml-io-input">
        <div class="btn-group">
          <button onclick="copyInput('xml-input')"><i class="fa-solid fa-copy" style="font-size:20px;color:lightblue;text-shadow:2px 2px 4px #000000;"></i> Copy XML</button>
          <button onclick="pasteInput('xml-input')"><i class="fa-solid fa-paste" style="font-size:20px;color:lightblue;text-shadow:2px 2px 4px #000000;"></i> Paste XML</button>
          <button onclick="clearInput('xml-input')"><i class="fa-solid fa-trash" style="font-size:20px;color:lightblue;text-shadow:2px 2px 4px #000000;"></i> Clear XML</button>
          <button onclick="convertXMLtoJSON()">
            <i class="fa-solid fa-arrow-right-arrow-left" style="font-size:20px;color:orange;text-shadow:2px 2px 4px #000000;"></i>
            Convert XML â†’ JSON
          </button>
          <button onclick="removeSpaces('xml-input')">
            <i class="fa-solid fa-eraser" style="font-size:20px;color:#ff9800;text-shadow:2px 2px 4px #000000;"></i>
            Remove Whitespace (XML)
          </button>
          <button class="action-btn" onclick="viewXML()"><i class="fa-solid fa-clipboard-check" style="font-size:20px;color:lightblue;text-shadow:2px 2px 4px #000000;"></i> View & Validate XML</button>
          <button class="action-btn" onclick="toggleFullScreen('xml-output')"><i class="fa-solid fa-display" style="font-size:20px;color:lightblue;text-shadow:2px 2px 4px #000000;"></i> Full Screen</button>
          <button class="action-btn" onclick="collapseAllXML()"><i class="fa-solid fa-down-left-and-up-right-to-center" style="font-size:20px;color:lightblue;text-shadow:2px 2px 4px #000000;"></i> Collapse All</button>
          <button class="action-btn" onclick="expandAllXML()"><i class="fa-solid fa-up-right-and-down-left-from-center" style="font-size:20px;color:lightblue;text-shadow:2px 2px 4px #000000;"></i> Expand All</button>
          <button class="action-btn" onclick="captureScreenshot('xml-output', 'xml-output-screenshot.png')">
            <i class="fa-solid fa-camera" style="font-size:20px;color:orange;text-shadow:2px 2px 4px #000000;"></i>
            Screenshot
          </button>
        </div>
  <textarea id="xml-input" placeholder="Paste XML here" oninput="viewXML()"></textarea>
      </div>

  <!-- Draggable divider -->
  <div class="divider" id="xml-divider"></div>

  <!-- Right side: XML output -->
  <div class="io-output" id="xml-io-output">
    <div id="xml-output" class="output tree"></div>
    <div id="xml-summary" style="margin-top: 8px; font-weight: bold; color: #888;"></div>
  </div>
<style>
.divider {
  width: 6px;
  background: linear-gradient(to bottom, #888 0%, #ccc 100%);
  cursor: col-resize;
  margin: 0 2px;
  border-radius: 3px;
  transition: background 0.2s;
  z-index: 2;
}
.divider:hover, .divider.active {
  background: #2196f3;
}
</style>
<script>
function makeResizable(inputId, dividerId, outputId) {
  let dragging = false;
  let startX = 0;
  let startInputWidth = 0;
  let startOutputWidth = 0;
  const input = document.getElementById(inputId);
  const divider = document.getElementById(dividerId);
  const output = document.getElementById(outputId);
  if (!input || !divider || !output) return;

  // Reset widths to default (50/50) when panel is shown
  function resetWidths() {
    input.style.flex = '';
    output.style.flex = '';
    input.style.width = '';
    output.style.width = '';
  }

  // Listen for custom event to reset widths
  divider.parentNode.addEventListener('reset-divider', resetWidths);

  divider.addEventListener('mousedown', function(e) {
    dragging = true;
    startX = e.clientX;
    startInputWidth = input.offsetWidth;
    startOutputWidth = output.offsetWidth;
    divider.classList.add('active');
    document.body.style.cursor = 'col-resize';
    e.preventDefault();
  });

  function onMouseMove(e) {
    if (!dragging) return;
    const dx = e.clientX - startX;
    let newInputWidth = startInputWidth + dx;
    let newOutputWidth = startOutputWidth - dx;
    const min = 80;
    const total = newInputWidth + newOutputWidth;
    if (newInputWidth < min) {
      newInputWidth = min;
      newOutputWidth = total - min;
    }
    if (newOutputWidth < min) {
      newOutputWidth = min;
      newInputWidth = total - min;
    }
    input.style.flex = 'none';
    output.style.flex = 'none';
    input.style.width = newInputWidth + 'px';
    output.style.width = newOutputWidth + 'px';
  }

  function onMouseUp() {
    if (dragging) {
      dragging = false;
      divider.classList.remove('active');
      document.body.style.cursor = '';
    }
  }

  document.addEventListener('mousemove', onMouseMove);
  document.addEventListener('mouseup', onMouseUp);
}

// Call after DOMContentLoaded to ensure all elements exist
document.addEventListener('DOMContentLoaded', function() {
  makeResizable('json-io-input', 'json-divider', 'json-io-output');
  makeResizable('xml-io-input', 'xml-divider', 'xml-io-output');
});

// Reset divider widths when switching panels
function showOnly(type) {
  document.getElementById('panel-json').classList.toggle('hidden', type !== 'json');
  document.getElementById('panel-xml').classList.toggle('hidden', type !== 'xml');
  // Reset divider widths for both panels
  const jsonWrapper = document.getElementById('json-divider').parentNode;
  const xmlWrapper = document.getElementById('xml-divider').parentNode;
  jsonWrapper.dispatchEvent(new Event('reset-divider'));
  xmlWrapper.dispatchEvent(new Event('reset-divider'));
}
</script>
<!-- html2canvas for screenshot functionality -->
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
<script>
function captureScreenshot(outputId, filename) {
  const output = document.getElementById(outputId);
  if (!output) return;
  // Temporarily expand to show all content
  const prevScrollTop = output.scrollTop;
  const prevScrollLeft = output.scrollLeft;
  output.scrollTop = 0;
  output.scrollLeft = 0;
  html2canvas(output, {useCORS: true, backgroundColor: null, windowWidth: output.scrollWidth, windowHeight: output.scrollHeight, width: output.scrollWidth, height: output.scrollHeight, scrollY: -window.scrollY}).then(canvas => {
    // Restore scroll
    output.scrollTop = prevScrollTop;
    output.scrollLeft = prevScrollLeft;
    const link = document.createElement('a');
    link.download = filename;
    link.href = canvas.toDataURL('image/png');
    link.click();
  });
}
</script>
        <div id="xml-summary" style="margin-top: 8px; font-weight: bold; color: #888;"></div>
      </div>

    </div>
  </div>

</div>

<!-- FOOTER -->
<footer>
  <p>Â© 2025 Dataz Studio | Professional Data Processing & Visualization Tool</p>
</footer>

<!-- Full JSON Modal -->
<div id="jsonModal" class="modal">
  <div class="modal-content">
    <span class="modal-close" onclick="closeFullJSONModal()">&times;</span>
    <h3>Full Formatted JSON</h3>
    <pre id="json-modal-content"></pre>
  </div>
</div>

<!-- Scripts -->
<script src="script.js"></script>
<script src="json.js"></script>
<script src="xml.js"></script>

<script>
document.addEventListener('DOMContentLoaded', function() {
  var jsonOutput = document.getElementById('json-output');
  var jsonInput = document.getElementById('json-input');
  
  // Helper to render tree view automatically
  function autoRenderTreeView() {
    if (!jsonInput || !jsonOutput || !jsonInput.value.trim()) {
      return;
    }
    
    // Use the same logic as beautifyJSON function
    if (typeof beautifyJSON === 'function') {
      beautifyJSON();
    }
  }
  
  // Auto-render tree view on input, paste, or change
  if (jsonInput) {
    // Debounced input handler to avoid too many calls while typing
    let inputTimeout;
    jsonInput.addEventListener('input', function() {
      clearTimeout(inputTimeout);
      inputTimeout = setTimeout(autoRenderTreeView, 500); // 500ms delay
    });
    
    // Immediate render on paste
    jsonInput.addEventListener('paste', function() { 
      setTimeout(autoRenderTreeView, 100); // Small delay to ensure paste content is available
    });
    
    // Render on change (when focus is lost)
    jsonInput.addEventListener('change', autoRenderTreeView);
  }
  
  // Initial render if any content exists
  if (jsonInput && jsonInput.value.trim()) {
    setTimeout(autoRenderTreeView, 100);
  }
});
</script>

</body>
</html>
